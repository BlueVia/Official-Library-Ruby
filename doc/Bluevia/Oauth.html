<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
  <meta content="text/html; charset=UTF-8" http-equiv="Content-Type" />

  <title>Class: Bluevia::Oauth</title>

  <link rel="stylesheet" href="../rdoc.css" type="text/css" media="screen" />

  <script src="../js/jquery.js" type="text/javascript" charset="utf-8"></script>
  <script src="../js/thickbox-compressed.js" type="text/javascript" charset="utf-8"></script>
  <script src="../js/quicksearch.js" type="text/javascript" charset="utf-8"></script>
  <script src="../js/darkfish.js" type="text/javascript" charset="utf-8"></script>

</head>
<body id="top" class="class">

  <div id="metadata">
    <div id="home-metadata">
      <div id="home-section" class="section">
        <h3 class="section-header">
          <a href="../index.html">Home</a>
          <a href="../index.html#classes">Classes</a>
          <a href="../index.html#methods">Methods</a>
        </h3>
      </div>
    </div>

    <div id="file-metadata">
      <div id="file-list-section" class="section">
        <h3 class="section-header">In Files</h3>
        <div class="section-body">
          <ul>
          
            <li><a href="../lib/bluevia/oauth_rb.html?TB_iframe=true&amp;height=550&amp;width=785"
              class="thickbox" title="lib/bluevia/oauth.rb">lib/bluevia/oauth.rb</a></li>
          
          </ul>
        </div>
      </div>

      
    </div>

    <div id="class-metadata">
      
      <!-- Parent Class -->
      <div id="parent-class-section" class="section">
        <h3 class="section-header">Parent</h3>
        
        <p class="link"><a href="BaseClient.html">Bluevia::BaseClient</a></p>
        
      </div>
      

      

      

      
      <!-- Method Quickref -->
      <div id="method-list-section" class="section">
        <h3 class="section-header">Methods</h3>
        <ul class="link-list">
          
          <li><a href="#method-c-new">::new</a></li>
          
          <li><a href="#method-i-get_access_token">#get_access_token</a></li>
          
          <li><a href="#method-i-get_request_token">#get_request_token</a></li>
          
        </ul>
      </div>
      

      
    </div>

    <div id="project-metadata">
      
      
      <div id="fileindex-section" class="section project-section">
        <h3 class="section-header">Files</h3>
        <ul>
        
          <li class="file"><a href="../Gemfile.html">Gemfile</a></li>
        
          <li class="file"><a href="../Rakefile.html">Rakefile</a></li>
        
          <li class="file"><a href="../UserGuide.html">UserGuide</a></li>
        
        </ul>
      </div>
      

      <div id="classindex-section" class="section project-section">
        <h3 class="section-header">Class/Module Index
          <span class="search-toggle"><img src="../images/find.png"
            height="16" width="16" alt="[+]"
            title="show/hide quicksearch" /></span></h3>
        <form action="#" method="get" accept-charset="utf-8" class="initially-hidden">
        <fieldset>
          <legend>Quicksearch</legend>
          <input type="text" name="quicksearch" value=""
            class="quicksearch-field" />
        </fieldset>
        </form>

        <ul class="link-list">
        
          <li><a href="../Schemas.html">Schemas</a></li>
        
          <li><a href="../Schemas/Common_types.html">Schemas::Common_types</a></li>
        
          <li><a href="../Schemas/Common_types/AddressType.html">Schemas::Common_types::AddressType</a></li>
        
          <li><a href="../Schemas/Common_types/ClientExceptionType.html">Schemas::Common_types::ClientExceptionType</a></li>
        
          <li><a href="../Schemas/Common_types/ExtensionType.html">Schemas::Common_types::ExtensionType</a></li>
        
          <li><a href="../Schemas/Common_types/FlagType.html">Schemas::Common_types::FlagType</a></li>
        
          <li><a href="../Schemas/Common_types/GenderType.html">Schemas::Common_types::GenderType</a></li>
        
          <li><a href="../Schemas/Common_types/IpAddressType.html">Schemas::Common_types::IpAddressType</a></li>
        
          <li><a href="../Schemas/Common_types/OtherIdType.html">Schemas::Common_types::OtherIdType</a></li>
        
          <li><a href="../Schemas/Common_types/ServerExceptionType.html">Schemas::Common_types::ServerExceptionType</a></li>
        
          <li><a href="../Schemas/Common_types/SimpleReferenceType.html">Schemas::Common_types::SimpleReferenceType</a></li>
        
          <li><a href="../Schemas/Common_types/UserIdType.html">Schemas::Common_types::UserIdType</a></li>
        
          <li><a href="../Schemas/Directory_types.html">Schemas::Directory_types</a></li>
        
          <li><a href="../Schemas/Directory_types/AddressType.html">Schemas::Directory_types::AddressType</a></li>
        
          <li><a href="../Schemas/Directory_types/ClientExceptionType.html">Schemas::Directory_types::ClientExceptionType</a></li>
        
          <li><a href="../Schemas/Directory_types/ExtensionType.html">Schemas::Directory_types::ExtensionType</a></li>
        
          <li><a href="../Schemas/Directory_types/FlagType.html">Schemas::Directory_types::FlagType</a></li>
        
          <li><a href="../Schemas/Directory_types/GenderType.html">Schemas::Directory_types::GenderType</a></li>
        
          <li><a href="../Schemas/Directory_types/IpAddressType.html">Schemas::Directory_types::IpAddressType</a></li>
        
          <li><a href="../Schemas/Directory_types/MmsStatusType.html">Schemas::Directory_types::MmsStatusType</a></li>
        
          <li><a href="../Schemas/Directory_types/NameType.html">Schemas::Directory_types::NameType</a></li>
        
          <li><a href="../Schemas/Directory_types/OtherIdType.html">Schemas::Directory_types::OtherIdType</a></li>
        
          <li><a href="../Schemas/Directory_types/ServerExceptionType.html">Schemas::Directory_types::ServerExceptionType</a></li>
        
          <li><a href="../Schemas/Directory_types/SimpleReferenceType.html">Schemas::Directory_types::SimpleReferenceType</a></li>
        
          <li><a href="../Schemas/Directory_types/StatusType.html">Schemas::Directory_types::StatusType</a></li>
        
          <li><a href="../Schemas/Directory_types/SubscribedServiceType.html">Schemas::Directory_types::SubscribedServiceType</a></li>
        
          <li><a href="../Schemas/Directory_types/UserAccessInfoType.html">Schemas::Directory_types::UserAccessInfoType</a></li>
        
          <li><a href="../Schemas/Directory_types/UserIdType.html">Schemas::Directory_types::UserIdType</a></li>
        
          <li><a href="../Schemas/Directory_types/UserIdentitiesType.html">Schemas::Directory_types::UserIdentitiesType</a></li>
        
          <li><a href="../Schemas/Directory_types/UserInfoType.html">Schemas::Directory_types::UserInfoType</a></li>
        
          <li><a href="../Schemas/Directory_types/UserPersonalInfoType.html">Schemas::Directory_types::UserPersonalInfoType</a></li>
        
          <li><a href="../Schemas/Directory_types/UserProfileType.html">Schemas::Directory_types::UserProfileType</a></li>
        
          <li><a href="../Schemas/Directory_types/UserTerminalInfoType.html">Schemas::Directory_types::UserTerminalInfoType</a></li>
        
          <li><a href="../Schemas/Location_types.html">Schemas::Location_types</a></li>
        
          <li><a href="../Schemas/Location_types/AddressType.html">Schemas::Location_types::AddressType</a></li>
        
          <li><a href="../Schemas/Location_types/ClientExceptionType.html">Schemas::Location_types::ClientExceptionType</a></li>
        
          <li><a href="../Schemas/Location_types/CoordinatesType.html">Schemas::Location_types::CoordinatesType</a></li>
        
          <li><a href="../Schemas/Location_types/ExtensionType.html">Schemas::Location_types::ExtensionType</a></li>
        
          <li><a href="../Schemas/Location_types/FlagType.html">Schemas::Location_types::FlagType</a></li>
        
          <li><a href="../Schemas/Location_types/GenderType.html">Schemas::Location_types::GenderType</a></li>
        
          <li><a href="../Schemas/Location_types/IpAddressType.html">Schemas::Location_types::IpAddressType</a></li>
        
          <li><a href="../Schemas/Location_types/LocationDataType.html">Schemas::Location_types::LocationDataType</a></li>
        
          <li><a href="../Schemas/Location_types/LocationInfoType.html">Schemas::Location_types::LocationInfoType</a></li>
        
          <li><a href="../Schemas/Location_types/OtherIdType.html">Schemas::Location_types::OtherIdType</a></li>
        
          <li><a href="../Schemas/Location_types/RetrievalStatusType.html">Schemas::Location_types::RetrievalStatusType</a></li>
        
          <li><a href="../Schemas/Location_types/ServerExceptionType.html">Schemas::Location_types::ServerExceptionType</a></li>
        
          <li><a href="../Schemas/Location_types/ServiceErrorType.html">Schemas::Location_types::ServiceErrorType</a></li>
        
          <li><a href="../Schemas/Location_types/SimpleReferenceType.html">Schemas::Location_types::SimpleReferenceType</a></li>
        
          <li><a href="../Schemas/Location_types/TerminalLocationListType.html">Schemas::Location_types::TerminalLocationListType</a></li>
        
          <li><a href="../Schemas/Location_types/UserIdType.html">Schemas::Location_types::UserIdType</a></li>
        
          <li><a href="../Schemas/Mms_types.html">Schemas::Mms_types</a></li>
        
          <li><a href="../Schemas/Mms_types/AddressType.html">Schemas::Mms_types::AddressType</a></li>
        
          <li><a href="../Schemas/Mms_types/ClientExceptionType.html">Schemas::Mms_types::ClientExceptionType</a></li>
        
          <li><a href="../Schemas/Mms_types/DeliveryInformationType.html">Schemas::Mms_types::DeliveryInformationType</a></li>
        
          <li><a href="../Schemas/Mms_types/DeliveryReceiptNotificationType.html">Schemas::Mms_types::DeliveryReceiptNotificationType</a></li>
        
          <li><a href="../Schemas/Mms_types/DeliveryStatusType.html">Schemas::Mms_types::DeliveryStatusType</a></li>
        
          <li><a href="../Schemas/Mms_types/DeliveryStatusUpdateType.html">Schemas::Mms_types::DeliveryStatusUpdateType</a></li>
        
          <li><a href="../Schemas/Mms_types/ExtensionType.html">Schemas::Mms_types::ExtensionType</a></li>
        
          <li><a href="../Schemas/Mms_types/FlagType.html">Schemas::Mms_types::FlagType</a></li>
        
          <li><a href="../Schemas/Mms_types/GenderType.html">Schemas::Mms_types::GenderType</a></li>
        
          <li><a href="../Schemas/Mms_types/IpAddressType.html">Schemas::Mms_types::IpAddressType</a></li>
        
          <li><a href="../Schemas/Mms_types/MessageDeliveryStatusType.html">Schemas::Mms_types::MessageDeliveryStatusType</a></li>
        
          <li><a href="../Schemas/Mms_types/MessageNotificationType.html">Schemas::Mms_types::MessageNotificationType</a></li>
        
          <li><a href="../Schemas/Mms_types/MessagePriorityType.html">Schemas::Mms_types::MessagePriorityType</a></li>
        
          <li><a href="../Schemas/Mms_types/MessageReferenceType.html">Schemas::Mms_types::MessageReferenceType</a></li>
        
          <li><a href="../Schemas/Mms_types/MessageType.html">Schemas::Mms_types::MessageType</a></li>
        
          <li><a href="../Schemas/Mms_types/MessageURIType.html">Schemas::Mms_types::MessageURIType</a></li>
        
          <li><a href="../Schemas/Mms_types/OtherIdType.html">Schemas::Mms_types::OtherIdType</a></li>
        
          <li><a href="../Schemas/Mms_types/ReceivedMessageAsyncType.html">Schemas::Mms_types::ReceivedMessageAsyncType</a></li>
        
          <li><a href="../Schemas/Mms_types/ReceivedMessagesType.html">Schemas::Mms_types::ReceivedMessagesType</a></li>
        
          <li><a href="../Schemas/Mms_types/ServerExceptionType.html">Schemas::Mms_types::ServerExceptionType</a></li>
        
          <li><a href="../Schemas/Mms_types/SimpleReferenceType.html">Schemas::Mms_types::SimpleReferenceType</a></li>
        
          <li><a href="../Schemas/Mms_types/UserIdType.html">Schemas::Mms_types::UserIdType</a></li>
        
          <li><a href="../Schemas/Payment_types.html">Schemas::Payment_types</a></li>
        
          <li><a href="../Schemas/Payment_types/ErrorType.html">Schemas::Payment_types::ErrorType</a></li>
        
          <li><a href="../Schemas/Payment_types/GetPaymentStatusParamsType.html">Schemas::Payment_types::GetPaymentStatusParamsType</a></li>
        
          <li><a href="../Schemas/Payment_types/GetPaymentStatusResultType.html">Schemas::Payment_types::GetPaymentStatusResultType</a></li>
        
          <li><a href="../Schemas/Payment_types/IpAddressType.html">Schemas::Payment_types::IpAddressType</a></li>
        
          <li><a href="../Schemas/Payment_types/MethodCallType.html">Schemas::Payment_types::MethodCallType</a></li>
        
          <li><a href="../Schemas/Payment_types/MethodCallType_.html">Schemas::Payment_types::MethodCallType_</a></li>
        
          <li><a href="../Schemas/Payment_types/MethodCallType_/Params.html">Schemas::Payment_types::MethodCallType_::Params</a></li>
        
          <li><a href="../Schemas/Payment_types/MethodResponseType.html">Schemas::Payment_types::MethodResponseType</a></li>
        
          <li><a href="../Schemas/Payment_types/MethodResponseType_.html">Schemas::Payment_types::MethodResponseType_</a></li>
        
          <li><a href="../Schemas/Payment_types/MethodResponseType_/Result.html">Schemas::Payment_types::MethodResponseType_::Result</a></li>
        
          <li><a href="../Schemas/Payment_types/MethodType.html">Schemas::Payment_types::MethodType</a></li>
        
          <li><a href="../Schemas/Payment_types/NotifyPaymentFinalStatusParamsType.html">Schemas::Payment_types::NotifyPaymentFinalStatusParamsType</a></li>
        
          <li><a href="../Schemas/Payment_types/OtherIdType.html">Schemas::Payment_types::OtherIdType</a></li>
        
          <li><a href="../Schemas/Payment_types/PaymentInfoType.html">Schemas::Payment_types::PaymentInfoType</a></li>
        
          <li><a href="../Schemas/Payment_types/PaymentParamsType.html">Schemas::Payment_types::PaymentParamsType</a></li>
        
          <li><a href="../Schemas/Payment_types/PaymentResultType.html">Schemas::Payment_types::PaymentResultType</a></li>
        
          <li><a href="../Schemas/Payment_types/SimpleReferenceType.html">Schemas::Payment_types::SimpleReferenceType</a></li>
        
          <li><a href="../Schemas/Payment_types/TransactionEnumerationType.html">Schemas::Payment_types::TransactionEnumerationType</a></li>
        
          <li><a href="../Schemas/Payment_types/UserIdType.html">Schemas::Payment_types::UserIdType</a></li>
        
          <li><a href="../Schemas/Sms_types.html">Schemas::Sms_types</a></li>
        
          <li><a href="../Schemas/Sms_types/AddressType.html">Schemas::Sms_types::AddressType</a></li>
        
          <li><a href="../Schemas/Sms_types/ClientExceptionType.html">Schemas::Sms_types::ClientExceptionType</a></li>
        
          <li><a href="../Schemas/Sms_types/DeliveryInformationType.html">Schemas::Sms_types::DeliveryInformationType</a></li>
        
          <li><a href="../Schemas/Sms_types/DeliveryStatusType.html">Schemas::Sms_types::DeliveryStatusType</a></li>
        
          <li><a href="../Schemas/Sms_types/ExtensionType.html">Schemas::Sms_types::ExtensionType</a></li>
        
          <li><a href="../Schemas/Sms_types/FlagType.html">Schemas::Sms_types::FlagType</a></li>
        
          <li><a href="../Schemas/Sms_types/GenderType.html">Schemas::Sms_types::GenderType</a></li>
        
          <li><a href="../Schemas/Sms_types/IpAddressType.html">Schemas::Sms_types::IpAddressType</a></li>
        
          <li><a href="../Schemas/Sms_types/OtherIdType.html">Schemas::Sms_types::OtherIdType</a></li>
        
          <li><a href="../Schemas/Sms_types/ReceivedSMSAsyncType.html">Schemas::Sms_types::ReceivedSMSAsyncType</a></li>
        
          <li><a href="../Schemas/Sms_types/ReceivedSMSType.html">Schemas::Sms_types::ReceivedSMSType</a></li>
        
          <li><a href="../Schemas/Sms_types/SMSDeliveryStatusType.html">Schemas::Sms_types::SMSDeliveryStatusType</a></li>
        
          <li><a href="../Schemas/Sms_types/SMSDeliveryStatusUpdateType.html">Schemas::Sms_types::SMSDeliveryStatusUpdateType</a></li>
        
          <li><a href="../Schemas/Sms_types/SMSMessageType.html">Schemas::Sms_types::SMSMessageType</a></li>
        
          <li><a href="../Schemas/Sms_types/SMSNotificationType.html">Schemas::Sms_types::SMSNotificationType</a></li>
        
          <li><a href="../Schemas/Sms_types/SMSTextType.html">Schemas::Sms_types::SMSTextType</a></li>
        
          <li><a href="../Schemas/Sms_types/ServerExceptionType.html">Schemas::Sms_types::ServerExceptionType</a></li>
        
          <li><a href="../Schemas/Sms_types/SimpleReferenceType.html">Schemas::Sms_types::SimpleReferenceType</a></li>
        
          <li><a href="../Schemas/Sms_types/UserIdType.html">Schemas::Sms_types::UserIdType</a></li>
        
          <li><a href="../Bluevia.html">Bluevia</a></li>
        
          <li><a href="../Bluevia/AdResponse.html">Bluevia::AdResponse</a></li>
        
          <li><a href="../Bluevia/Advertising.html">Bluevia::Advertising</a></li>
        
          <li><a href="../Bluevia/Attach.html">Bluevia::Attach</a></li>
        
          <li><a href="../Bluevia/Attach/Attachment.html">Bluevia::Attach::Attachment</a></li>
        
          <li><a href="../Bluevia/BaseClient.html">Bluevia::BaseClient</a></li>
        
          <li><a href="../Bluevia/BlueviaClient.html">Bluevia::BlueviaClient</a></li>
        
          <li><a href="../Bluevia/ClientError.html">Bluevia::ClientError</a></li>
        
          <li><a href="../Bluevia/Directory.html">Bluevia::Directory</a></li>
        
          <li><a href="../Bluevia/Errors.html">Bluevia::Errors</a></li>
        
          <li><a href="../Bluevia/Location.html">Bluevia::Location</a></li>
        
          <li><a href="../Bluevia/Messaging.html">Bluevia::Messaging</a></li>
        
          <li><a href="../Bluevia/Mms.html">Bluevia::Mms</a></li>
        
          <li><a href="../Bluevia/NotFoundError.html">Bluevia::NotFoundError</a></li>
        
          <li><a href="../Bluevia/Oauth.html">Bluevia::Oauth</a></li>
        
          <li><a href="../Bluevia/OauthPayment.html">Bluevia::OauthPayment</a></li>
        
          <li><a href="../Bluevia/Payment.html">Bluevia::Payment</a></li>
        
          <li><a href="../Bluevia/Response.html">Bluevia::Response</a></li>
        
          <li><a href="../Bluevia/Schemas.html">Bluevia::Schemas</a></li>
        
          <li><a href="../Bluevia/ServerError.html">Bluevia::ServerError</a></li>
        
          <li><a href="../Bluevia/ServicesFactory.html">Bluevia::ServicesFactory</a></li>
        
          <li><a href="../Bluevia/Sms.html">Bluevia::Sms</a></li>
        
          <li><a href="../Bluevia/Utils.html">Bluevia::Utils</a></li>
        
          <li><a href="../Bluevia/Utils/Multipart.html">Bluevia::Utils::Multipart</a></li>
        
          <li><a href="../OAuth.html">OAuth</a></li>
        
          <li><a href="../OAuth/Client.html">OAuth::Client</a></li>
        
          <li><a href="../OAuth/Client/Helper.html">OAuth::Client::Helper</a></li>
        
          <li><a href="../Rack.html">Rack</a></li>
        
          <li><a href="../Rack/Multipart.html">Rack::Multipart</a></li>
        
          <li><a href="../Rack/Multipart/Parser.html">Rack::Multipart::Parser</a></li>
        
          <li><a href="../BlueviaLogger.html">BlueviaLogger</a></li>
        
          <li><a href="../Hash.html">Hash</a></li>
        
          <li><a href="../Multipartable.html">Multipartable</a></li>
        
        </ul>
        <div id="no-class-search-results" style="display: none;">No matching classes.</div>
      </div>

      
    </div>
  </div>

  <div id="documentation">
    <h1 class="class">Bluevia::Oauth</h1>

    <div id="description" class="description">
      
<p>This class can be used to launch oAuth authentication mechanism when a user
is using the application for the first time</p>

<p>User authentication is launched using oAuth protocol, so user is not
required to use credentials in third party applications.  When user wants
to launch the oAuth process, once the <a href="../Bluevia.html">Bluevia</a>
client has been created only the two lines below are required to retrieve a
valid token for user:</p>

<pre>@service = @bc.get_service(:oAuth)
token, secret, url = @service.get_request_token({:callback =&gt;&quot;http://foo.bar&quot;})

Note that :callback is an optional parameter. 
If it's defined you will receive the oauth_verifier as a request parameter at your callback_url. 
If it's not defined you will have to ask the user to enter the PIN code (oauth_verifier) in your application.
Finally if :callback parameter is provided, it can also be a string with an MSISDN as follows:

token, secret, url = @service.get_request_token(&quot;34567890&quot;)

The retrieved parameter token and secret should be use during the oAuth process, and url is the endpoint where Bluevia shall authenticate the user. In case of a Rails application, the lines below could be used:

token, token_secret, url = @service.get_request_token(&quot;http://juan.pollinimini.net/bluevia/get_access&quot;)
cookies[:token] = &quot;#{token}|#{token_secret}&quot;
redirect_to(url)</pre>

<p>Once user is authenticated and she authorized the application in BlueVia
portal, she should be redirected to the URL used as parameter before. Now
it’s time to fetch the valid token and token secret that shall identify the
new user during any call to BlueVia API. Lines below show an example using
Rails:</p>

<pre>def get_access
   oauth_verifier = params[:oauth_verifier]
   get_token_from_cookie
   @bc = BlueviaClient.new(
     { :consumer_key   =&gt; CONSUMER_KEY,
       :consumer_secret=&gt; CONSUMER_SECRET
     })
   @service = @bc.get_service(:oAuth)
   @token, @token_secret = @service.get_access_token(@request_token, @request_secret, oauth_verifier)
end

private
 def get_token_from_cookie
   cookie_token = cookies[:token]
   unless cookie_token.nil?
     cookie_token = cookie_token.split(&quot;|&quot;)
     if cookie_token.size != 2
       raise SyntaxError, &quot;The cookie is not valid&quot;
     end
     @request_token = cookie_token[0]
     @request_secret = cookie_token[1]
   end
 end</pre>

    </div><!-- description -->

    
    <div id="5Buntitled-5D" class="documentation-section">
      

      

      
      <!-- Constants -->
      <div id="constants-list" class="section">
        <h3 class="section-header">Constants</h3>
        <dl>
        
          <dt><a name="AUTHORIZE_URI">AUTHORIZE_URI</a></dt>
          
          <dd class="description"></dd>
          
        
        </dl>
      </div>
      

      

      <!-- Methods -->
      
      <div id="public-class-method-details" class="method-section section">
        <h3 class="section-header">Public Class Methods</h3>

      
        <div id="new-method" class="method-detail ">
          <a name="method-c-new"></a>

          
          <div class="method-heading">
            <span class="method-name">new</span><span
              class="method-args">(params = nil)</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          

          <div class="method-description">
            
            
            

            
            <div class="method-source-code" id="new-source">
<pre>
<span class="ruby-comment"># File lib/bluevia/oauth.rb, line 64</span>
  <span class="ruby-keyword">def</span> <span class="ruby-identifier">initialize</span>(<span class="ruby-identifier">params</span> = <span class="ruby-keyword">nil</span>)
    <span class="ruby-keyword">super</span>(<span class="ruby-identifier">params</span>)
<span class="ruby-keyword">end</span></pre>
            </div><!-- new-source -->
            
          </div>

          

          
        </div><!-- new-method -->

      
      </div><!-- public-class-method-details -->
    
      <div id="public-instance-method-details" class="method-section section">
        <h3 class="section-header">Public Instance Methods</h3>

      
        <div id="get_access_token-method" class="method-detail ">
          <a name="method-i-get_access_token"></a>

          
          <div class="method-heading">
            <span class="method-name">get_access_token</span><span
              class="method-args">(token, token_secret, oauth_verifier)</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          

          <div class="method-description">
            
            
            

            
            <div class="method-source-code" id="get_access_token-source">
<pre>
<span class="ruby-comment"># File lib/bluevia/oauth.rb, line 116</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">get_access_token</span>(<span class="ruby-identifier">token</span>, <span class="ruby-identifier">token_secret</span>, <span class="ruby-identifier">oauth_verifier</span>)
  <span class="ruby-keyword">begin</span>
    <span class="ruby-identifier">consumer</span> = <span class="ruby-constant">OAuth</span><span class="ruby-operator">::</span><span class="ruby-constant">Consumer</span>.<span class="ruby-identifier">new</span>            <span class="ruby-ivar">@consumer_key</span>, <span class="ruby-ivar">@consumer_secret</span>,
      {
        <span class="ruby-value">:site</span>               =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">@@base_uri</span>,
        <span class="ruby-value">:signature_method</span>   =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&quot;HMAC-SHA1&quot;</span>,
        <span class="ruby-value">:request_token_path</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-node">&quot;#{BASEPATH}/Oauth/getRequestToken&quot;</span>,
        <span class="ruby-value">:access_token_path</span>  =<span class="ruby-operator">&gt;</span> <span class="ruby-node">&quot;#{BASEPATH}/Oauth/getAccessToken&quot;</span>,
        <span class="ruby-value">:http_method</span>        =<span class="ruby-operator">&gt;</span> <span class="ruby-value">:post</span>
      }
    <span class="ruby-identifier">request_token</span> = <span class="ruby-constant">OAuth</span><span class="ruby-operator">::</span><span class="ruby-constant">RequestToken</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">consumer</span>, <span class="ruby-identifier">token</span>, <span class="ruby-identifier">token_secret</span>)
    <span class="ruby-identifier">access_token</span> = <span class="ruby-identifier">request_token</span>.<span class="ruby-identifier">get_access_token</span>(<span class="ruby-value">:oauth_verifier</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">oauth_verifier</span>)

    <span class="ruby-keyword">return</span> <span class="ruby-identifier">access_token</span>.<span class="ruby-identifier">params</span>[<span class="ruby-value">:oauth_token</span>], <span class="ruby-identifier">access_token</span>.<span class="ruby-identifier">params</span>[<span class="ruby-value">:oauth_token_secret</span>]
  <span class="ruby-keyword">rescue</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">ex</span>
    <span class="ruby-keyword">return</span> <span class="ruby-keyword">nil</span>, <span class="ruby-keyword">nil</span> <span class="ruby-comment"># error</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
            </div><!-- get_access_token-source -->
            
          </div>

          

          
        </div><!-- get_access_token-method -->

      
        <div id="get_request_token-method" class="method-detail ">
          <a name="method-i-get_request_token"></a>

          
          <div class="method-heading">
            <span class="method-name">get_request_token</span><span
              class="method-args">(*_params)</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          

          <div class="method-description">
            
            
            

            
            <div class="method-source-code" id="get_request_token-source">
<pre>
<span class="ruby-comment"># File lib/bluevia/oauth.rb, line 68</span>
    <span class="ruby-keyword">def</span> <span class="ruby-identifier">get_request_token</span>(*<span class="ruby-identifier">_params</span>)
      
      <span class="ruby-identifier">consumer</span>=<span class="ruby-constant">OAuth</span><span class="ruby-operator">::</span><span class="ruby-constant">Consumer</span>.<span class="ruby-identifier">new</span>          <span class="ruby-ivar">@consumer_key</span>,
        <span class="ruby-ivar">@consumer_secret</span>,
        {
          <span class="ruby-value">:site</span>               =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">@@base_uri</span>,
          <span class="ruby-value">:signature_method</span>   =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&quot;HMAC-SHA1&quot;</span>,
          <span class="ruby-value">:request_token_path</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-node">&quot;#{BASEPATH}/Oauth/getRequestToken&quot;</span>,
          <span class="ruby-value">:access_token_path</span>  =<span class="ruby-operator">&gt;</span> <span class="ruby-node">&quot;#{BASEPATH}/Oauth/getAccessToken&quot;</span>,
          <span class="ruby-comment">#:proxy              =&gt; &quot;http://localhost:8888&quot;,</span>
          <span class="ruby-value">:http_method</span>        =<span class="ruby-operator">&gt;</span> <span class="ruby-value">:post</span>
        }

      <span class="ruby-identifier">params</span> = <span class="ruby-constant">Hash</span>.<span class="ruby-identifier">new</span>
      <span class="ruby-keyword">if</span> <span class="ruby-identifier">_params</span>.<span class="ruby-identifier">size</span><span class="ruby-operator">&gt;</span><span class="ruby-value">1</span>
        <span class="ruby-constant">Raise</span> <span class="ruby-constant">ClientError</span>, <span class="ruby-string">&quot;Wrong number of arguments&quot;</span>
      <span class="ruby-keyword">end</span>
      <span class="ruby-keyword">if</span> <span class="ruby-identifier">_params</span>.<span class="ruby-identifier">empty?</span> 
        <span class="ruby-identifier">params</span>[<span class="ruby-value">:oauth_callback</span>] = <span class="ruby-string">&quot;oob&quot;</span>
        <span class="ruby-identifier">uri</span> = <span class="ruby-constant">AUTHORIZE_URI</span>
      <span class="ruby-keyword">else</span>
        <span class="ruby-keyword">if</span> <span class="ruby-identifier">_params</span>[<span class="ruby-value">0</span>].<span class="ruby-identifier">instance_of?</span>(<span class="ruby-constant">String</span>)
          <span class="ruby-identifier">params</span>[<span class="ruby-value">:oauth_callback</span>] = <span class="ruby-identifier">_params</span>[<span class="ruby-value">0</span>]
          <span class="ruby-identifier">uri</span> = <span class="ruby-constant">AUTHORIZE_URI</span>
        <span class="ruby-keyword">elsif</span> <span class="ruby-identifier">_params</span>[<span class="ruby-value">0</span>].<span class="ruby-identifier">instance_of?</span>(<span class="ruby-constant">Hash</span>)
          <span class="ruby-keyword">if</span> <span class="ruby-identifier">_params</span>[<span class="ruby-value">0</span>].<span class="ruby-identifier">has_key?</span>(<span class="ruby-value">:callback</span>)
            <span class="ruby-identifier">params</span>[<span class="ruby-value">:oauth_callback</span>] = <span class="ruby-identifier">_params</span>[<span class="ruby-value">0</span>][<span class="ruby-value">:callback</span>]
          <span class="ruby-keyword">else</span>
            <span class="ruby-identifier">params</span>[<span class="ruby-value">:oauth_callback</span>] =<span class="ruby-string">&quot;oob&quot;</span>
          <span class="ruby-keyword">end</span>
          <span class="ruby-keyword">if</span> <span class="ruby-identifier">_params</span>[<span class="ruby-value">0</span>].<span class="ruby-identifier">has_key?</span>(<span class="ruby-value">:uri</span>)
            <span class="ruby-identifier">uri</span> = <span class="ruby-identifier">_params</span>[<span class="ruby-value">0</span>][<span class="ruby-value">:uri</span>]
          <span class="ruby-keyword">else</span>
            <span class="ruby-identifier">uri</span> = <span class="ruby-constant">AUTHORIZE_URI</span>
          <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">end</span>
      <span class="ruby-keyword">end</span>
<span class="ruby-comment">#      request_token = consumer.get_request_token(params, {:v =&gt; &quot;1&quot;}, specific_params)</span>
      <span class="ruby-identifier">request_token</span> = <span class="ruby-identifier">consumer</span>.<span class="ruby-identifier">get_request_token</span>(<span class="ruby-identifier">params</span>)
      <span class="ruby-keyword">if</span>(<span class="ruby-identifier">params</span>[<span class="ruby-value">:oauth_callback</span>].<span class="ruby-identifier">to_i</span><span class="ruby-operator">==</span><span class="ruby-value">0</span>)
        <span class="ruby-keyword">return</span> <span class="ruby-identifier">request_token</span>.<span class="ruby-identifier">token</span>, <span class="ruby-identifier">request_token</span>.<span class="ruby-identifier">secret</span>, <span class="ruby-node">&quot;#{uri}?oauth_token=#{request_token.token}&quot;</span>
      <span class="ruby-keyword">else</span>
        <span class="ruby-keyword">return</span> <span class="ruby-identifier">request_token</span>.<span class="ruby-identifier">token</span>, <span class="ruby-identifier">request_token</span>.<span class="ruby-identifier">secret</span>, <span class="ruby-string">&quot;&quot;</span>
      <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">end</span></pre>
            </div><!-- get_request_token-source -->
            
          </div>

          

          
        </div><!-- get_request_token-method -->

      
      </div><!-- public-instance-method-details -->
    
    </div><!-- 5Buntitled-5D -->
  

  </div><!-- documentation -->

  <div id="validator-badges">
    <p><small><a href="http://validator.w3.org/check/referer">[Validate]</a></small></p>
    <p><small>Generated with the <a href="http://deveiate.org/projects/Darkfish-Rdoc/">Darkfish
      Rdoc Generator</a> 2</small>.</p>
  </div>

</body>
</html>

